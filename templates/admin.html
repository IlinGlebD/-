{% extends "base.html" %}

{% block title %}Панель администратора - Мессенджер{% endblock %}

{% block content %}
<div class="admin-container">
    <h2>Панель администратора</h2>
    
    <div class="users-table">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Логин</th>
                    <th>Дата регистрации</th>
                    <th>Роль</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('edit_user', user_id=user.id) }}" class="inline-form">
                            <input type="text" name="username" value="{{ user.username }}" {% if user.is_admin %}readonly{% endif %}>
                            {% if not user.is_admin %}
                            <button type="submit" class="btn btn-small">Сохранить</button>
                            {% endif %}
                        </form>
                    </td>
                    <td>{{ user.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                    <td>
                        {% if user.is_admin %}
                            <span class="badge admin">Администратор</span>
                        {% else %}
                            <span class="badge user">Пользователь</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if not user.is_admin %}
                        <a href="{{ url_for('delete_user', user_id=user.id) }}" 
                           class="btn btn-danger btn-small"
                           onclick="return confirm('Вы уверены, что хотите удалить пользователя {{ user.username }}?')">
                            Удалить
                        </a>
                        {% else %}
                        <span class="text-muted">Системный аккаунт</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}